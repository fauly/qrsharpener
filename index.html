<html>
    <head>
        <title>QR Code Sharpener</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        <div id="editorSection" style="display: none;">
                <h3>Adjust QR Code Position</h3>
                <p>Drag the corner handles to align with the QR code corners. Adjust dimensions to see the grid overlay. The live preview shows your reconstructed QR code.</p>
                <div class="editor-controls">
                    <button id="zoomInBtn">+</button>
                    <button id="zoomOutBtn">-</button>
                    <button id="resetZoomBtn">Reset Zoom</button>
                    <span id="zoomLevel">Zoom: 100%</span>
                </div>
                <div class="editor-main">
                    <div class="canvas-wrapper">
                        <canvas id="editorCanvas"></canvas>
                    </div>
                    <div class="preview-wrapper">
                        <h4>Live QR Preview</h4>
                        <canvas id="previewCanvas"></canvas>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="convertBtn" disabled>Convert QR Code</button>
                </div>
            </div>linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                margin: 0;
                padding: 20px;
                min-height: 100vh;
                color: #333;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                padding: 30px;
                box-sizing: border-box;
            }
            h1 {
                text-align: center;
                color: #4a5568;
                margin-bottom: 10px;
                font-size: 2.5em;
            }
            .description {
                text-align: center;
                color: #718096;
                font-size: 1.1em;
                line-height: 1.6;
                margin-bottom: 30px;
            }
            .input-section {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 20px;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            .input-group {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            label {
                font-weight: bold;
                margin-bottom: 5px;
                color: #4a5568;
            }
            input[type="number"] {
                padding: 10px;
                border: 2px solid #e2e8f0;
                border-radius: 5px;
                font-size: 1em;
                width: 80px;
                text-align: center;
            }
            input[type="file"] {
                padding: 10px;
                border: 2px solid #e2e8f0;
                border-radius: 5px;
                background: #f7fafc;
                cursor: pointer;
            }
            input[type="file"]:hover {
                background: #edf2f7;
            }
            button {
                padding: 12px 24px;
                background: #3182ce;
                color: white;
                border: none;
                border-radius: 5px;
                font-size: 1em;
                cursor: pointer;
                transition: background 0.3s;
            }
            button:hover:not(:disabled) {
                background: #2c5282;
            }
            button:disabled {
                background: #a0aec0;
                cursor: not-allowed;
            }
            .status {
                text-align: center;
                font-weight: bold;
                color: #3182ce;
                margin: 20px 0;
                min-height: 20px;
            }
            .image-section {
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
                gap: 20px;
                margin-top: 30px;
            }
            .image-container {
                flex: 1;
                min-width: 300px;
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .image-container h3 {
                color: #4a5568;
                margin-bottom: 10px;
            }
            .image-wrapper {
                width: 300px;
                height: 300px;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid #e2e8f0;
                border-radius: 5px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                background: #f7fafc;
            }
            img {
                image-rendering: pixelated;
                width: 100%;
                height: 100%;
                object-fit: fill;
                border-radius: 3px;
            }
            .canvas-wrapper {
                width: 600px;
                height: 400px;
                border: 2px solid #e2e8f0;
                border-radius: 5px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                background: #f7fafc;
                margin: 0 auto;
                position: relative;
            }
            #editorCanvas {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border-radius: 3px;
            }
            .editor-controls {
                text-align: center;
                margin-bottom: 10px;
            }
            .editor-controls button {
                padding: 5px 10px;
                margin: 0 5px;
                background: #e2e8f0;
                border: 1px solid #cbd5e0;
                border-radius: 3px;
                cursor: pointer;
            }
            .editor-controls button:hover {
                background: #cbd5e0;
            }
            #zoomLevel {
                font-weight: bold;
                color: #4a5568;
            }
            .editor-main {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: flex-start;
                flex-wrap: wrap;
            }
            .preview-wrapper {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .preview-wrapper h4 {
                margin: 0 0 10px 0;
                color: #4a5568;
            }
            #previewCanvas {
                border: 2px solid #e2e8f0;
                border-radius: 5px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                background: white;
                width: 200px;
                height: 200px;
                image-rendering: pixelated;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>QR Code Sharpener</h1>
            <p class="description">
                This tool tries recreate a QR code from blurry QR code images by segmenting the image into n times n
                pieces and then guessing whether the piece is white or black.
            </p>
            <p class="description">
                Upload an image, then use the editor below to adjust the corner handles to align with the QR code corners and set the dimensions to see the grid overlay. Click "Convert QR Code" when ready. The tool will crop to the selected area and sharpen the QR code.
            </p>
            <div class="input-section">
                <div class="input-group">
                    <label for="dimensions">Dimensions:</label>
                    <input id="dimensions" type="number" value="66" min="1" max="177" placeholder="1-177" />
                </div>
                <div class="input-group">
                    <label for="uploader">File:</label>
                    <input id="uploader" type="file" accept="image/*" />
                </div>
            </div>
            <div id="editorSection" style="display: none;">
                <h3>Adjust QR Code Position</h3>
                <p>Drag the corner handles to align with the QR code corners. Adjust dimensions to see the grid overlay. The live preview shows your reconstructed QR code.</p>
                <div class="editor-controls">
                    <button id="zoomInBtn">+</button>
                    <button id="zoomOutBtn">-</button>
                    <button id="resetZoomBtn">Reset Zoom</button>
                    <span id="zoomLevel">Zoom: 100%</span>
                </div>
                <div class="editor-main">
                    <div class="canvas-wrapper">
                        <canvas id="editorCanvas"></canvas>
                    </div>
                    <div class="preview-wrapper">
                        <h4>Live QR Preview</h4>
                        <canvas id="previewCanvas"></canvas>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="convertBtn" disabled>Convert QR Code</button>
                </div>
            </div>
            <div id="status" class="status"></div>
            <div class="image-section">
                <div class="image-container">
                    <h3>Result Image</h3>
                    <div class="image-wrapper">
                        <img id="resultImage" />
                    </div>
                </div>
                <div class="image-container">
                    <h3>Annotated Image</h3>
                    <div class="image-wrapper">
                        <img id="annotatedImage" />
                    </div>
                </div>
            </div>
        </div>
        <script type="module" src="index.js"></script>
    </body>
</html>
